
# ë””ìì¸ íŒ¨í„´ ì‹œë¦¬ì¦ˆ 3í¸

## ë°ì½”ë ˆì´í„° íŒ¨í„´ Decorator Pattern

ë°ì½”ë ˆì´í„° íŒ¨í„´(Decorator pattern)ì´ë€Â **ì£¼ì–´ì§„ ìƒí™© ë° ìš©ë„ì— ë”°ë¼ ì–´ë–¤ ê°ì²´ì— ì±…ì„ì„ ë§ë¶™ì´ëŠ” íŒ¨í„´**ìœ¼ë¡œ, ê¸°ëŠ¥ í™•ì¥ì´ í•„ìš”í•  ë•Œ ì„œë¸Œí´ë˜ì‹± ëŒ€ì‹  ì“¸ ìˆ˜ ìˆëŠ” ìœ ì—°í•œ ëŒ€ì•ˆì´ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ë°ì½”ë ˆì´í„° íŒ¨í„´ì„ ì´ìš©í•˜ë©´ í•„ìš”í•œ ì¶”ê°€ ê¸°ëŠ¥ì˜ ì¡°í•©ì„ ëŸ°íƒ€ì„ì—ì„œ ë™ì ìœ¼ë¡œ ìƒì„± í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ë°ì½”ë ˆì´í„° í•  ëŒ€ìƒ ê°ì²´ë¥¼ ìƒˆë¡œìš´ í–‰ë™ì„ í¬í•¨í•œ íŠ¹ìˆ˜ ì¥ì‹ì ê°ì²´ì— ë„£ì–´ì„œ ì¥ì‹ì ê°ì²´ë§ˆë‹¤ ì—°ê²° ì‹œì¼œ ìœ ì—°í•˜ê²Œ ê¸°ëŠ¥ì„ ì¶”ê°€ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì˜¤ëŠ˜ ìš°ë¦¬ëŠ” ì»¤í”¼ ì „ë¬¸ì ì˜ ì£¼ë¬¸ ì‹œìŠ¤í…œì„ êµ¬ì¶•í•˜ë ¤ê³  í•©ë‹ˆë‹¤.

ìš°ì„  ìŒë£Œë¼ëŠ” Base classë¥¼ ì‘ì„±í•´ë´…ì‹œë‹¤.

```csharp
public class Beverage
{
		private string description = "ì´ë¦„ ì—†ìŒ";
		
		public string GetDescription()
		{
				return description;
		}
		
		public abstract double cost();
}
```

ì´ì œ ì—¬ê¸°ì— ê°ê° ìŒë£Œì˜ ì¶”ê°€ ì‚¬í•­ì„ ë§Œë“¤ì–´ì•¼ í•©ë‹ˆë‹¤.

ì–´ë–»ê²Œ êµ¬í˜„í• ì§€ ì ì‹œ ìˆ¨ì„ ê³ ë¥´ë©´ì„œ ìƒê°í•´ ë´…ì‹œë‹¤.

ë§Œì•½ Beverageë¥¼ ìƒì†í•´ì„œ í™•ì¥í•œë‹¤ê³  ê°€ì •í•´ë´…ì‹œë‹¤.

![](decorator-badcase.png)

í´ë˜ìŠ¤ê°€ í­ë°œí•´ë²„ë ¸ë„¤ìš” í•˜ì§€ë§Œ ì§„ì§œ ë¬¸ì œëŠ” ì´ê±°ì£ 

ìš°ìœ  ê°€ê²©ì´ ì¸ìƒí•œë‹¤ë©´â€¦.?

ê·¸ë ‡ë‹¤ë©´ base classë¥¼ ìˆ˜ì •í•˜ë©´ ì–´ë–¨ê¹Œìš”?

```csharp
public class Beverage
{
		private string description = "ì´ë¦„ ì—†ìŒ";
		
		public string GetDescription()
		{
				return description;
		}
		
		public double cost();
		
		public double setMilk();
		public double hasMilk();
		public double setMocha();
		public double hasMocha();
		public double setWhip(); 
		.
		.
		.
		
	
}
```

ì˜¤ë²„ë¼ì´ë“œë¥¼ í†µí•´ì„œ ì´ë ‡ê²Œ ê´€ë¦¬í•˜ë©´ ì•ˆë ê¹Œìš”?

- 1í¸ì— ë‚˜ì™”ë˜ ë°”ë‹·ì† ê²Œì„ì„ ìƒê°í•´ë´…ì‹œë‹¤.
    
    íœ˜í•‘í¬ë¦¼ì´ ì˜¬ë¼ê°„ ì•„ì´ìŠ¤í‹°ê°€ ë  ìˆ˜ë„ ìˆê² ë„¤ìš”! (ì·¨í–¥ì€ ì¡´ì¤‘í•©ë‹ˆë‹¤.)
    

ì²¨ê°€ë¬¼ ê°€ê²©ì´ ë°”ë€” ë•Œ ë§ˆë‹¤ ì½”ë“œë¥¼ ìˆ˜ì •í•´ì•¼í•˜ëŠ” ë¶€ë¶„ì€ ë³€í•¨ì—†ë„¤ìš”.

ìƒˆë¡œìš´ ë©”ì†Œë“œë¥¼ ê³„ì†í•´ì„œ ì‘ì„±í•´ì•¼ë§Œ í•˜ê²Œ ë ê±°ì˜ˆìš”â€¦.

---

# OCP : open-close Principle

í™•ì¥ì—ëŠ” ì—´ë ¤ìˆì§€ë§Œ ìˆ˜ì •ì—ëŠ” ë‹«í˜€ ìˆì–´ì•¼ í•œë‹¤

ì¦‰, ê¸°ì¡´ ì½”ë“œëŠ” ìœ ì§€í•˜ë˜ í™•ì¥ì„ í†µí•´ì„œ ìƒˆë¡œìš´ í–‰ë™ì„ ì¶”ê°€ í•  ìˆ˜ ìˆë„ë¡ í•´ì•¼í•©ë‹ˆë‹¤.

### ë°ì½”ë ˆì´í„°ì˜ êµ¬ì¡°

![](img1.daumcdn.png)

Component (interface) : ì›ë³¸ ê°ì²´ë¥¼ ì¥ì‹ì ê°ì²´ì— ë„£ê¸° ìœ„í•´ì„œëŠ” ê³µí†µì˜ íƒ€ì…ì´ í•„ìš”í•©ë‹ˆë‹¤. ê·¸ë˜ì„œ ì¸í„°í˜ì´ìŠ¤ë¥¼ í™•ì¥í•˜ëŠ” í˜•íƒœë¡œ êµ¬í˜„í•©ë‹ˆë‹¤. ë§Œì•½ ì¶”ìƒí´ë˜ìŠ¤ë¡œ êµ¬í˜„ë˜ì–´ìˆë‹¤ë©´ ì‚¬ìš©í•˜ì…”ë„ ì¢‹ìŠµë‹ˆë‹¤.

ConcreteComponent : ì¥ì‹í•  ì›ë³¸ ê°ì²´ ì…ë‹ˆë‹¤. 

Decorator : ì¥ì‹ìë¥¼ í™•ì¥í•  ì¶”ìƒ í´ë˜ìŠ¤ ì…ë‹ˆë‹¤. ì›ë³¸ ê°ì²´ë¥¼ í•©ì„±í•  í•„ë“œì™€ ë©”ì†Œë“œë¥¼ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤.

Concrete Decorator : êµ¬ì²´ì ì¸ ì¥ì‹ì í´ë˜ìŠ¤ ì…ë‹ˆë‹¤.

---

## ë°ì½”ë ˆì´í„° íŒ¨í„´ ì ìš©

```csharp
// ê°ì²´ë¥¼ ë¬¶ì–´ì¤„ ì»´í¬ë„ŒíŠ¸
public interface IBeverage
{
		string GetDescription()
		double GetCost();
}

// ì¥ì‹í•  ì›ë³¸ ê°ì²´
public class Coffee : IBeverage
{
		public string GetDescription() => "Coffee";
		public double GetCost() => 5.0;
}

public class Decaffeine: IBeverage
{
		public string GetDescription() => "Decaffeine Coffee";
		public double GetCost() => 5.0;
}
```

```csharp
// ì¥ì‹ì„ êµ¬ì„±í•  ì¶”ìƒ í´ë˜ìŠ¤
public abstract class Decorator : IBeverage
{
		private IBeverage _beverage; // ì›ë³¸ ê°ì²´ë¥¼ ë‹´ì•„ì¤„ê±°ì˜ˆìš”
		
		public Decorator(IBeverage beverrage)
		{
				_beverage = beverage;
		}
		
    public virtual string GetDescription()
    {
        return _beverage.GetDescription();
    }

    public virtual double GetCost()
    {
        return _beverage.GetCost();
    }
}
```

```csharp
// ì¥ì‹í•  ë°ì½”ë ˆì´í„°
public class Whip: Decorator
{
    public Whip(IBeverage beverage) : base(beverage)
    {
    }

    public override string GetDescription()
    {
        return _beverage.GetDescription() + ", Whip";
    }

    public override double GetCost()
    {
        return _beverage.GetCost() + 1.5;
    }
}

public class Mocha: Decorator
{
    public Mocha(IBeverage beverage) : base(beverage)
    {
    }

    public override string GetDescription()
    {
        return _beverage.GetDescription() + ", Mocha";
    }

    public override double GetCost()
    {
        return _beverage.GetCost() + 0.5;
    }
}
```

ì¹´í˜ ëª¨ì¹´ë¥¼ ì£¼ë¬¸ì´ ë“¤ì–´ì™”ì–´ìš”!

1. ê¸°ë³¸ì ìœ¼ë¡œ ë‹¤í¬ë¡œìŠ¤íŠ¸ ì»¤í”¼ë¥¼ ê°ì²´ë¡œ ìƒì„±í•©ë‹ˆë‹¤.
2. ê·¸ë¦¬ê³  ì´ ê°ì²´ë¥¼ ëª¨ì¹´ ê°ì²´ë¡œ ì¥ì‹ í• ê±°ì˜ˆìš”
3. ê·¸ë¦¬ê³  íœ˜í•‘ ê°ì²´ë¡œ í•œë²ˆ ë” ì¥ì‹í•©ë‹ˆë‹¤.
4. ì´ì œ ê°€ì¥ ë°”ê¹¥ìª½ cost() ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•©ë‹ˆë‹¤.

![7.jpg](<https://prod-files-secure.s3.us-west-2.amazonaws.com/b524c802-1d4f-4828-94fc-5e24539164ad/45ab9b2b-9ac0-48f9-b30d-0ef5ab1bf0f0/7.jpg>)

íœ˜í•‘ì€ ëª¨ì¹´ì˜ costë¥¼ ëª¨ì¹´ëŠ” ë‹¤í¬ë¡œìŠ¤íŠ¸ì˜ costë¥¼ í˜¸ì¶œ í•©ë‹ˆë‹¤.

ê·¸ë¦¬ê³  ë‹¤í¬ë¡œìŠ¤íŠ¸ëŠ” ìì‹ ì˜ ê°€ê²©ì„ ë¦¬í„´ìœ¼ë¡œ ìœ„ì„í•´ì£¼ì£ .

ëª¨ì¹´ëŠ” ë‹¤í¬ë¡œìŠ¤íŠ¸ ê°€ê²©ê³¼ ìì‹ ì˜ ê°€ê²©ì„ ë”í•´ ë°˜í™˜í•©ë‹ˆë‹¤.

ì´ë ‡ê²Œ ë§ˆì§€ë§‰ê¹Œì§€ ë”í•´ ìµœì¢…ì ìœ¼ë¡œ ê°€ê²©ì„ ë°˜í™˜í•©ë‹ˆë‹¤.

### ì‚¬ìš©ì˜ˆì œ

```csharp
public class Program
{
		 public static void Main(string[] args)
    {
       
        IBeverage beverage = new Coffee();
        Console.WriteLine(beverage.GetDescription() + " - Cost: " + beverage.GetCost());

       // ëª¨ì¹´ ì¶”ê°€
        beverage = new Mocha(beverage);
        Console.WriteLine(beverage.GetDescription() + " - Cost: " + beverage.GetCost());

       // íœ˜í•‘ ì¶”ê°€
        beverage = new Whip(new Mocha(beverage)); // ì˜ˆì‹œë¡œ ì´ëŸ° í˜•íƒœê°€ ë©ë‹ˆë‹¤.
        Console.WriteLine(beverage.GetDescription() + " - Cost: " + beverage.GetCost());
    }
}
```

```csharp
ì¶œë ¥

Coffee - Cost: 5.0
Coffee, Mocha - Cost: 5.5
Coffee, Mocha, Whip - Cost: 6.0
```

<aside> ğŸ’¡

ì£¼ì˜ - ìˆœì„œì— ë”°ë¼ í–‰ë™ì´ ë³€í•  ìˆ˜ ìˆë‹¤.

</aside>

### ìë°” I/O ë°ì½”ë ˆì´í„° íŒ¨í„´

![](5lFYGKd.png)

ì‹¤ì œë¡œ ìë°”ì—ëŠ” ë°ì½”ë ˆì´í„° íŒ¨í„´ì„ ì ìš©í•œ ê³„ì¸µì  êµ¬ì¡° í´ë˜ìŠ¤ê°€ ì¡´ì¬í•©ë‹ˆë‹¤.
ìŠ¤í”„ë§ ë¶€íŠ¸ì˜ http ê´€ë ¨ ì„œë¸”ë¦¿ë„ ì´ëŸ° í˜•íƒœë¥¼ ë„ê³  ìˆìŠµë‹ˆë‹¤.

ìœ ì—°í•œ í™•ì¥ì´ ê°€ëŠ¥ í•˜ë‹¤ëŠ” ë“±ì˜ ì—¬ëŸ¬ ì¥ì ì´ ìˆì§€ë§Œ 
ë‹¨ì ìœ¼ë¡œëŠ” ì½”ë“œê°€ ë³µì¡í•´ ì§ˆ ìˆ˜ ìˆë‹¤ëŠ” ì ê³¼ ê°€ì¥ í° ë‹¨ì ìœ¼ë¡œëŠ” ê°ì²´ ìƒì„±ì˜ ìˆœì„œë¥¼ ì§€ì¼œì•¼ í•˜ë‹¤ëŠ” ì ì…ë‹ˆë‹¤. (ìˆœì„œì˜ ì˜ì¡´í•´ì•¼í•¨)
ë˜í•œ ì¤‘ì²© ê³„ì¸µì´ ë§ì•„ì§€ë©´ í˜¸ì¶œ ìˆœì„œì˜ ë³µì¡í•¨ ì¦ê°€ì™€ ìˆ¨ê²¨ì§„ í•¨ìˆ˜ì˜ ë””ë²„ê¹…ì´ ì–´ë ¤ì›Œ ì§„ë‹¤ëŠ” ì ì„ ê¼½ì„ ìˆ˜ ìˆì„ê±° ê°™ìŠµë‹ˆë‹¤.

ë!

> [ğŸ’  ë°ì½”ë ˆì´í„°(Decorator) íŒ¨í„´ - ì™„ë²½ ë§ˆìŠ¤í„°í•˜ê¸°](https://inpa.tistory.com/entry/GOF-%F0%9F%92%A0-%EB%8D%B0%EC%BD%94%EB%A0%88%EC%9D%B4%ED%84%B0Decorator-%ED%8C%A8%ED%84%B4-%EC%A0%9C%EB%8C%80%EB%A1%9C-%EB%B0%B0%EC%9B%8C%EB%B3%B4%EC%9E%90) í—¤ë“œ í¼ìŠ¤íŠ¸ ë””ìì¸ íŒ¨í„´