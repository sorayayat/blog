
## Spring Securityëž€


Spring SecurityëŠ” ê°•ë ¥í•˜ê³  ì‚¬ìš©ìž ì •ì˜ê°€ ê°€ëŠ¥í•œ ì¸ì¦ ë° ì•¡ì„¸ìŠ¤ ì œì–´ í”„ë ˆìž„. ì´ëŠ” Spring ê¸°ë°˜ ì• í”Œë¦¬ì¼€ì´ì…˜ ë³´ì•ˆì„ ìœ„í•œ ì‚¬ì‹¤ìƒì˜ í‘œì¤€ìž…ë‹ˆë‹¤.

Spring SecurityëŠ” Java ì• í”Œë¦¬ì¼€ì´ì…˜ì— ì¸ì¦ê³¼ ê¶Œí•œ ë¶€ì—¬ë¥¼ ëª¨ë‘ ì œê³µí•˜ëŠ” ë° ì¤‘ì ì„ ë‘” í”„ë ˆìž„ì›Œí¬ìž…ë‹ˆë‹¤. ëª¨ë“  Spring í”„ë¡œì íŠ¸ì™€ ë§ˆì°¬ê°€ì§€ë¡œ Spring Securityì˜ ì§„ì •í•œ íž˜ì€ ì‚¬ìš©ìž ì •ì˜ ìš”êµ¬ ì‚¬í•­ì„ ì¶©ì¡±í•˜ê¸° ìœ„í•´ ì–¼ë§ˆë‚˜ ì‰½ê²Œ í™•ìž¥í•  ìˆ˜ ìžˆëŠ”ì§€ì— ìžˆìŠµë‹ˆë‹¤.

### íŠ¹ì§•

- ì¸ì¦ ë° ê¶Œí•œ ë¶€ì—¬ì— ëŒ€í•œ í¬ê´„ì ì´ê³  í™•ìž¥ ê°€ëŠ¥í•œ ì§€ì›

- ì„¸ì…˜ ê³ ì •, í´ë¦­ìž¬í‚¹, í¬ë¡œìŠ¤ ì‚¬ì´íŠ¸ ìš”ì²­ ìœ„ì¡° ë“±ê³¼ ê°™ì€ ê³µê²©ìœ¼ë¡œë¶€í„° ë³´í˜¸

- ì„œë¸”ë¦¿ API í†µí•©

- Spring Web MVCì™€ì˜ ì„ íƒì  í†µí•©


ìš”ì²­ì„ ê°€ë¡œì±„ì„œ(ì¸í„°ì…‰íŠ¸) filterë¥¼ ê±°ì³ ì„¤ì •ì— ë§žê²Œ ì‚¬ìš©ìžì˜ ê¶Œí•œ ë° ì ‘ê·¼ì„ ì„¤ì • í•  ìˆ˜ ìžˆë‹¤.





### êµ¬í˜„

**íŠ¹ì´ ì‚¬í•­**

ë²„ì „ ë³„ë¡œ êµ¬í˜„í•˜ëŠ” ë°©ì‹ì´ë‚˜ ë©”ì†Œë“œë“¤ì´ ì¡°ê¸ˆì”© ë°”ë€ë‹¤. 
ìžì„¸í•œ ë‚´ìš©ì€ ê³µì‹ë¬¸ì„œë‚˜ ì œê³µí•˜ëŠ” ê¹ƒí—™ì—ì„œ í™•ì¸í•˜ì‹œê¸¸.
- ì´ ê¸€ì€ 3.2.4ë¡œ ìž‘ì„±ë¨

gradleì— ì˜ì¡´ì„±ì„ ì¶”ê°€í•œë‹¤.

```implementation 'org.springframework.boot:spring-boot-starter-security'```


security ì„¤ì •ì„ ê´€ë¦¬í•  íŒ¨í‚¤ì§€ë¥¼ ë§Œë“¤ê³  í´ëž˜ìŠ¤ë¥¼ ìƒì„±í•œë‹¤

í´ëž˜ìŠ¤ëª…ì€ ìžìœ ë¡­ê²Œ ìž‘ì„±í•´ë„ ëœë‹¤


```
@Configuration
@EnableWebSecurity // spring securityì—ì„œ í´ëž˜ìŠ¤ë¥¼ ì¸ì‹í•˜ê³  ê´€ë¦¬í•œë‹¤.
public class SecurityConfig {

	@Bean
    SecurityFilterChain filterChain(HttpSecurity http) throws Exception {
		return http;
	}
}
```


filterChainë¼ëŠ” ì¸í„°íŽ˜ì´ìŠ¤ë¥¼ ê°€ì§€ê³  ë©”ì†Œë“œë¥¼ ìž‘ì„±í•œë‹¤. ì´ë•Œ ì¸ìžëŠ” HttpSecurityë¼ëŠ” í´ëž˜ìŠ¤ë¥¼ ë°›ì•„ì„œ ì‚¬ìš©í•œë‹¤.
ê·¸ë¦¬ê³  httpë¥¼ ë¦¬í„´í•´ì¤€ë‹¤.

ëžŒë‹¤ì‹ì„ ì‚¬ìš©í•˜ì—¬ ìž‘ì„±í•´ë³´ìž

```
@Bean
    SecurityFilterChain filterChain(HttpSecurity http) throws Exception {
		http
			.authorizeHttpRequests((auth) -> auth
				.requestMatchers("/", "login").permitAll()
			);
			
		return http.build();
		
		}
```




requestMatchersë¼ëŠ” ë©”ì†Œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ í•´ë‹¹ ê²½ë¡œì— ëŒ€í•œ ì—¬ëŸ¬ê°€ì§€ ì˜µì…˜ì„ ì»¨íŠ¸ë¡¤ í•  ìˆ˜ ìžˆë‹¤.
![[blog/img/Pasted image 20240417181224.png]]

| method        | ê¸°ëŠ¥                                 |
| ------------- | ---------------------------------- |
| hasRole       | ì‚¬ìš©ìžì˜ ì—­í• ì— ë”°ë¼ ê¶Œí•œ ì„¤ì •ì´ ê°€ëŠ¥í•˜ë‹¤ (ê´€ë¦¬ìž, ì‚¬ìš©ìž) |
| permitAll     | ëª¨ë“  ì‚¬ìš©ìžì—ê²Œ ì ‘ê·¼í—ˆìš©                      |
| authenticated | ë¡œê·¸ì¸ì‹œì— ì ‘ê·¼ í—ˆìš©                        |
| denyAll       | ëª¨ë“  ì‚¬ìš©ìžê°€ ì ‘ê·¼í•˜ì§€ ëª»í•˜ë„ë¡ í•œë‹¤               |

ë‹¤ìŒ ë‚´ìš©ì„ ì¶”ê°€í•œë‹¤.
```
.formLogin((formLogin)-> formLogin
				.loginPage("/login")
				.loginProcessingUrl("/login/login-proc")
				.defaultSuccessUrl("/home")
				.failureUrl("/login"))
				
		.logout((logout) -> logout
				.logoutSuccessUrl("/")
				.invalidateHttpSession(true)
                )
```

ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ê°€ ì œê³µí•˜ëŠ” ë¡œê·¸ì¸ í¼ì´ ìžë™ìœ¼ë¡œ ì‚¬ìš©ë˜ì§€ë§Œ ì›í•˜ëŠ” í˜•ì‹ì´ ìžˆë‹¤ë©´
ìœ„ì™€ ê°™ì´ ì„¤ì •í•œë‹¤.

ê·¸ë¦¬ê³  htmlì—ì„œ action íƒœê·¸ë¡œ loginProcessingUrl("/login/login-proc")ì™€ ê°™ì€ ì£¼ì†Œë¥¼ ë„£ì–´ì£¼ë©´ ì‹œíë¦¬í‹°ê°€ ì•Œì•„ì„œ í”„ë¡ íŠ¸ì—ì„œ ë°›ì•„ì™€ ë¡œê·¸ì¸ì„ ì²˜ë¦¬í•´ì¤€ë‹¤!!!

ê·¸ë¦¬ê³  ë¡œê·¸ì¸ì— ì„±ê³µí•˜ë©´ ì´ë™í•  íŽ˜ì´ì§€ë„ ì„¤ì •í•´ì¤€ë‹¤.
ë¡œê·¸ì¸ ì‹¤íŒ¨ì‹œì— ì´ë™í•  íŽ˜ì´ì§€ë„ ì„¤ì • í•  ìˆ˜ ìžˆë‹¤.

ë¦¬ë‹¤ì´ë ‰íŠ¸ ì²™ì²™í•´ì¤€ë‹¤.....ðŸ‘

ì‹¤í–‰í•˜ë©´ ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ê°€ ìž„ì‹œë¡œ ë¹„ë°€ë²ˆí˜¸ë¥¼ í•˜ë‚˜ ë°œê¸‰í•´ì¤€ë‹¤
í„°ë¯¸ë„ì„ ìž˜ë³´ë©´ ì•”í˜¸í™”ëœ ë¹„ë°€ë²ˆí˜¸ê°€ ìžˆê³  idëŠ” userë‹¤.




>ì°¸ê³ ìžë£Œ - https://spring.io/projects/spring-security  
>youtube - https://youtu.be/y0PXQgrkb90?si=m9tQz_PYppu6F2dy