### HTTP 개요

HTTP는 HTML 문서와 같은 리소스들을 가져올 수 있도록 해주는 프로토콜 입니다.
HTTP는 웹에서 이루어지는 모든 데이터 교환의 기초이며, 클라이언트 - 서버 프로토콜 입니다.
클라이언트 - 서버 프로토콜이란 수신자 측에 의해 요청이 초기화되는 프로토콜을 의미 합니다.

즉, C - S protocol = HTTP protocol 

하나의 완전한 문서는 텍스트, 레이아웃 설명, 이미지, 비디오, 스크립트 등을 불러온 (fetched) 하위 문서를 재구성 됩니다.

![웹 문서는 다른 리소스들의 구성](https://mdn.github.io/shared-assets/images/diagrams/http/overview/fetching-a-page.svg)

클라이언트와 서버는 개별적인 메세지 교환으로 통신합니다.
보통 클라이언트 ( 브라우저 )가 전송되는 메세지를 요청(Requests)이라고 하며, 이에 대해서 응답하는 서버의 전송 메세지를 응답(Responses)라고 합니다.

![TCP(전송 계층) 및 IP(네트워크 계층) 위 및 표시 계층 아래의 응용 계층 프로토콜로서의 HTTP.](https://mdn.github.io/shared-assets/images/diagrams/http/overview/http-layers.svg)

HTTP는 거듭 진화해온 확장 가능한 프로토콜로 애플리케이션 계층의 프로토콜로, 신뢰가 가능한 전송 프로토콜이라면 이론상으로는 무엇이든 사용 할 수 있으나 TCP 혹은 암호화된 TCP 연결인 TLS를 통해 전송 됩니다.
이런 확정성 덕분에 하이퍼텍스트 문서 뿐만 아니라 이미지, 비디오 혹은 HTML 폼 결과와 같은 내용을 서버로 포스트 하기 위해서도 사용 됩니다. 또한 필요할 때마다 웹 페이지를 갱신하기 위해 문서의 일부를 가져오는데 사용 될 수도 있습니다 (Ajax -> Fetch API, Websocket)
##### TLS 
> SSL을 개선하여 나온 프로토콜로 현재는 TLS로 대체 되었다. 
 [SSL 이란](https://www.canva.com/design/DAGADLIeKjk/rU322d_cJBrUUlaoi8iy9g/view?utm_content=DAGADLIeKjk&utm_campaign=designshare&utm_medium=link&utm_source=editor)

### HTTP 기반 시스템의 구성

우리는 HTTP가 클라이언트  - 서버 프로토콜이며 요청과 응답으로 통신한다는 것을 알았습니다.
요청이란 무엇이며 어떻게 이루어져 있을까요?
요청은 하나의 개체, 사용자 에이전트에 의해 전송됩니다. 
여기서 헤더에 정보를 담아 자신을 식별하기 위한 헤더를 포함하게 됩니다.

```
GET / HTTP/1.1
Host: example.com
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/112.0.0.0 Safari/537.36
```
예를 들어 사용자가 요청하는 개체는 다음과 같은 형태 입니다.

우린 위에서 신뢰가 가능한 전송 프로토콜이라면 이론상으로 무엇이든 사용 가능하다고 했습니다.
아래 검색 엔진 로봇이 그런 경우가 될 수 있습니다.
HTTP 요청을 사용하여 웹페이지를 크롤링하고 검색 인덱스를 구축합니다.

postman, curl과 (http test 도구)같이 API 요청 도구 또한 요청을 보내고 응답 데이터를 확인합니다.

요청과 응답 사이에는 여러 개체들이 있는데, 예를 들어 다양한 작업을 수행하는 **게이트웨이** 또는 캐시 역할을 하는 **프록시** 등이 있습니다.
( 계층들을 오가며 여러 개체와 많은 컴퓨터들을 거치는 과정을 거칩니다. 라우터, 모뎀 등이 있습니다.)
웹의 계층적 설계 덕분에 네트워크와 전송 계층 내로 숨겨지는게 가능해지죠

### 웹서버

통신 채널의 반대편에는 클라이언트 요청에 대한 문서를 제공하는 서버가 존재합니다. 서버는 사실 상 논리적으로 단일 기계입니다. 이는 로드 (로드밸런싱) 혹은 그때 그때 다른 컴퓨터(캐시, DB서버 등)들의 정보를 얻고 완전하거나 부분적으로 문서를 생성하는 SW 복잡한 부분을 공유하는 집합 일 수도 있습니다. 

여러개의 서버를 동일한 머신에서 호스팅하는 것도 가능합니다.
HTTP/1.1 이전에는 클라이언트가 요청을 보낼 때 IP 주소만으로 서버를 식별 했기 때문에 동일 머신에서 여러 도메인을 운영하는데 한계가 있었죠.
이제는 Host 헤더가 도입되면서 한 서버에서 여러 웹사이트를 호스팅하는 가상 호스팅이 가능 해졌습니다. (도메인으로 알 수 있습니다!)

### HTTP stateless

기본적으로 무상태(stateless)프로토콜 입니다.
즉, 한 번의 요청과 응답이 끝나면 클라이언트와 서버의 연결 상태는 유지 되지 않습니다.
그렇기 때문에 사용자의 로그인 상태, 장바구니 정보, 세션 유지 같은 상태를 필요로 하는 애플리케이션에서는 추가적인 상태 관리가 필요합니다.
(쿠키, 세션, 토큰...)


함께 보면 좋을 내용
>[OSI 7 계층](OSI%207%20계층.md)
